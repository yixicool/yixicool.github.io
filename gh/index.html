<!DOCTYPE html>
<html lang="zh-CN" color-mode="light">

  <head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  
  <meta name="author" content="陈一熙" />
  <meta name="description" content="天气真好，睡了好久" />
  
  
  <title>
    
      Grasshopper 
      
      
      |
    
     椒堂往事
  </title>

  
    <link rel="apple-touch-icon" href="https://pic.imgdb.cn/item/627238140947543129f6fccb.jpg">
    <link rel="icon" href="https://pic.imgdb.cn/item/627238140947543129f6fccb.jpg">
  

  <!-- Raleway-Font -->
  <link href="https://fonts.googleapis.com/css?family=Raleway&display=swap" rel="stylesheet">

  <!-- hexo site css -->
  <link rel="stylesheet" href="/css/main.css" />
  <link rel="stylesheet" href="//at.alicdn.com/t/font_1886449_67xjft27j1l.css" />
  <!-- 代码块风格 -->
  

  <!-- jquery3.3.1 -->
  
    <script defer type="text/javascript" src="/plugins/jquery.min.js"></script>
  

  <!-- fancybox -->
  
    <link href="/plugins/jquery.fancybox.min.css" rel="stylesheet">
    <script defer type="text/javascript" src="/plugins/jquery.fancybox.min.js"></script>
  
  
<script src="/js/fancybox.js"></script>


  

  

  <script>
    var html = document.documentElement
    const colorMode = localStorage.getItem('color-mode')
    if (colorMode) {
      document.documentElement.setAttribute('color-mode', colorMode)
    }
  </script>
<!-- hexo injector head_end start --><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper/swiper-bundle.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Zfour/Butterfly-card-history/baiduhistory/css/main.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Zfour/hexo-electric-clock@1.0.6/clock.css"><!-- hexo injector head_end end --><meta name="generator" content="Hexo 5.4.0"><link rel="alternate" href="/atom.xml" title="椒堂往事" type="application/atom+xml">
</head>


  <body>
    <div id="app">
      <div class="header">
  <div class="avatar">
    <a href="/">
      <!-- 头像取消懒加载，添加no-lazy -->
      
        <img src="https://pic.imgdb.cn/item/627238140947543129f6fccb.jpg" alt="">
      
    </a>
    <div class="nickname"><a href="/">陈一熙</a></div>
  </div>
  <div class="navbar">
    <ul>
      
        <li class="nav-item" data-path="/">
          <a href="/">Home</a>
        </li>
      
        <li class="nav-item" data-path="/archives/">
          <a href="/archives/">Archives</a>
        </li>
      
        <li class="nav-item" data-path="/categories/">
          <a href="/categories/">Categories</a>
        </li>
      
        <li class="nav-item" data-path="/tags/">
          <a href="/tags/">Tags</a>
        </li>
      
        <li class="nav-item" data-path="/broken-thoughts/">
          <a href="/broken-thoughts/">broken-thoughts</a>
        </li>
      
        <li class="nav-item" data-path="/myself/">
          <a href="/myself/">About</a>
        </li>
      
    </ul>
  </div>
</div>


<script src="/js/activeNav.js"></script>



      <div class="flex-container">
        <!-- 文章详情页，展示文章具体内容，url形式：https://yoursite/文章标题/ -->
<!-- 同时为「标签tag」，「朋友friend」，「分类categories」，「关于about」页面的承载页面，具体展示取决于page.type -->


  <!-- LaTex Display -->

  
    <script async type="text/javascript" src="/plugins/mathjax/tex-chtml.js"></script>
  
  <script>
    MathJax = {
      tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']]
      }
    }
  </script>





  <!-- clipboard -->

  
    <script async type="text/javascript" src="/plugins/clipboard.min.js"></script>
  
  
<script src="/js/codeCopy.js"></script>







  

  

  

  
  <!-- 文章内容页 url形式：https://yoursite/文章标题/ -->
  <div class="container post-details" id="post-details">
    <div class="post-content">
      <div class="post-title">Grasshopper</div>
      <div class="post-attach">
        <span class="post-pubtime">
          <i class="iconfont icon-updatetime mr-10" title="更新时间"></i>
          2023-01-26 13:58:20
        </span>
        
              <span class="post-categories">
                <i class="iconfont icon-bookmark" title="分类"></i>
                
                <span class="span--category">
                  <a href="/categories/%E5%BB%BA%E7%AD%91%E5%AD%A6/" title="建筑学">
                    <b>#</b> 建筑学
                  </a>
                </span>
                
                <span class="span--category">
                  <a href="/categories/%E5%BB%BA%E7%AD%91%E5%AD%A6/%E8%BD%AF%E4%BB%B6/" title="软件">
                    <b>#</b> 软件
                  </a>
                </span>
                
              </span>
          
              <span class="post-tags">
                <i class="iconfont icon-tags mr-10" title="标签"></i>
                
                <span class="span--tag mr-8">
                  <a href="/tags/%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97/" title="学习指南">
                    #学习指南
                  </a>
                </span>
                
                <span class="span--tag mr-8">
                  <a href="/tags/pc/" title="pc">
                    #pc
                  </a>
                </span>
                
                <span class="span--tag mr-8">
                  <a href="/tags/%E5%BB%BA%E6%A8%A1/" title="建模">
                    #建模
                  </a>
                </span>
                
                <span class="span--tag mr-8">
                  <a href="/tags/%E5%BB%BA%E7%AD%91/" title="建筑">
                    #建筑
                  </a>
                </span>
                
                <span class="span--tag mr-8">
                  <a href="/tags/%E8%BD%AF%E4%BB%B6/" title="软件">
                    #软件
                  </a>
                </span>
                
                <span class="span--tag mr-8">
                  <a href="/tags/Rhino/" title="Rhino">
                    #Rhino
                  </a>
                </span>
                
                <span class="span--tag mr-8">
                  <a href="/tags/Grasshopper/" title="Grasshopper">
                    #Grasshopper
                  </a>
                </span>
                
              </span>
          
      </div>
      <div class="markdown-body">
        <p>Grasshopper的本质是对数据层级逻辑的理解与处理    </p>
<p>gh编程所得物体在rhino中无法编辑，如果需要映射到rhino中，则可以选中gh的模型后鼠标中键或者右键中的<code>bake</code>来拷贝出来，然后就可以被选中编辑了</p>
<h1 id="Grasshopper常见运算器名称总结"><a href="#Grasshopper常见运算器名称总结" class="headerlink" title="Grasshopper常见运算器名称总结"></a>Grasshopper常见运算器名称总结</h1><h2 id="Params-参数"><a href="#Params-参数" class="headerlink" title="Params - 参数"></a>Params - 参数</h2><p>Params中大部分黑色图标都为拾取组件，即对应组件要在rhino中拾取后应用</p>
<h3 id="Geometry-几何体"><a href="#Geometry-几何体" class="headerlink" title="Geometry - 几何体"></a>Geometry - 几何体</h3><ul>
<li><code>point</code>：点</li>
<li><code>curve</code>：曲线</li>
<li><code>line</code>：直线</li>
<li><code>vector</code>：向量</li>
<li><code>rectangle</code>：矩形</li>
<li><code>surface</code>：表皮</li>
<li>……</li>
<li>黑色部分组件皆为拾取组件，初始需要在rhino中定义后拾取</li>
<li>失去过后如果rhino中丢失拾取内容，gh中会出现报错</li>
</ul>
<h3 id="Input-输入"><a href="#Input-输入" class="headerlink" title="Input - 输入"></a>Input - 输入</h3><ul>
<li><code>number slider</code>：拉杆、数字滑动条<ul>
<li>双击组件可以进一步调节数据</li>
<li>R：浮点数运算</li>
<li>N：整数运算</li>
<li>E：偶数</li>
<li>O：奇数</li>
</ul>
</li>
<li><code>boolean toggle</code>：布尔开关</li>
<li><code>MD slider</code>：多维滑块。在默认0到1的区间取二维坐标值，可以双击修改自定义区间。多用于曲面归一化后找曲面上点的位置</li>
<li><code>graph mapper</code>：函数映射器，右键可以选择不同的函数图表类型，用来改变数据趋势、控制曲线等，双击操作面板进入编辑</li>
<li><code>panel</code>：数据显示面板(快捷键//)</li>
</ul>
<h3 id="Util"><a href="#Util" class="headerlink" title="Util"></a>Util</h3><ul>
<li><code>relay</code>：中继器（双击电池线可快捷生成）</li>
<li><code>Param Viewer</code>：树形数据结构查看器</li>
<li><code>Scribble</code>：标注</li>
</ul>
<h2 id="Math"><a href="#Math" class="headerlink" title="Math"></a>Math</h2><h3 id="domain-区间范围"><a href="#domain-区间范围" class="headerlink" title="domain - 区间范围"></a>domain - 区间范围</h3><ul>
<li><code>construct domain</code>：构造一维区间，用两个值组成一个区间。</li>
<li><code>deconstruct domain</code>：分解一维区间，拆分得到区间的大小值。</li>
</ul>
<h2 id="Sets"><a href="#Sets" class="headerlink" title="Sets"></a>Sets</h2><p>gh的核心内容：处理数据</p>
<p>每组数据一一对应，组内数据计算也是一一对应，出现数据不对等情况会重复处理。</p>
<p>线形数据与线形数据计算会将两个列表中的数据一一对应计算。出现数据不对等情况会重复处理</p>
<p>线形数据与树形数据计算会将线形数据与树形数据中的每个列表来对应计算（本质上是因为出现单独的列表和多个列表造成的数据不对等情况而导致重复处理）</p>
<p>树形数据与树形数据计算会将两个树形数据中的每个列表来对应一一计算，出现数据不对等情况会重复处理</p>
<p>panel面板右上角会显示各组数据分支的路径，而表示分支的方法为等级制度 (层次结构) ：</p>
<p>{0}（数据 A 列表）</p>
<p>{0;0}（数据 B 列表）</p>
<p>{0;0;0}（数据 C 列表）</p>
<p>{0;0;1}（数据 D 列表）</p>
<p>{0;0;2}（数据 E 列表）</p>
<p>{0;1}（数据 F 列表）</p>
<p>{0;1;0}（数据 G 列表）</p>
<p>{0;1;1}（数据列表 H）</p>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line"><span class="code">       /==C</span></span><br><span class="line"><span class="code">   /==B ==D</span></span><br><span class="line"><span class="code">==A   \==E</span></span><br><span class="line"><span class="code">   \==F ==G</span></span><br><span class="line"><span class="code">       \==H</span></span><br><span class="line"><span class="code"></span></span><br><span class="line"><span class="section"># 树形层级结构</span></span><br></pre></td></tr></table></figure>

<p>如果合并一个带有路径 {0} 的列表、带有 {0;0} 的列表和另一个带有 {0;0;0} 的列表，实际上不会得到一组列表，而是得到的是一棵有三个分支的树。在这种情况下要加入这三个列表到同一个列表中，你要做的就是全部Flatten展平到 {0}，然后当它们聚集在一起时，由于它们都有相同的路径 ({0})，数据将挂在同一个分支/列表中，所有分支的数据将被收集，而 {0}就是主干。</p>
<h3 id="list-线形数据"><a href="#list-线形数据" class="headerlink" title="list - 线形数据"></a>list - 线形数据</h3><p>连接线为实线</p>
<p>列表是用于管理2个及以上的数据，每个数据有对应的编号（索引值），编号从0开始。</p>
<p>数据形式为一组数据 </p>
<p>即每个数据都是唯一且不相同的</p>
<ul>
<li><code>insert item</code>：在指定列表的指定序号位置插入指定的数据（可以同时插入多个）。第三项包裹端为布尔值，决定如果序号打入列表总数量是否循环取值。</li>
<li><code>list item</code>：取出列表中指定序列号（索引）的数据，第三项包裹端为布尔值，决定当输入的索引序列号大于列表中最大序列号时，是否循环取值</li>
<li><code>reverse list</code>：使列表中的数据反向排列，在列表的右键中的反转是同样的作用</li>
<li><code>list length</code>：输出列表长度值</li>
<li><code>shift list</code>：按照设定的偏移值偏移列表中的数值，第三项包裹输入的布尔值决定是删除偏移的数据还是移动到最后</li>
<li><code>sort list</code>：  将列表的数据按从小到大的顺序重新排列。很常用的运算器，比如我想将点按照高度排序，或者根据线长短进行排序等等。配合<code>reverse list</code>可实现倒序排列。</li>
<li><code>partition list</code>：将列表按照指定的数量大小分组</li>
<li><code>weave</code>：数据编织，根据编织模式设定的规则（0和1构成的数列），依次将数据流0和数据流1合并成一组，可以增加多组自定义数据流接口</li>
</ul>
<h3 id="Sequence-序列集合"><a href="#Sequence-序列集合" class="headerlink" title="Sequence - 序列集合"></a>Sequence - 序列集合</h3><ul>
<li><code>series</code>：等差数列，根据设定初始值（默认为0）、步长（默认为1）、个数（默认为10），生成一组等差数列。默认生成的数列为0到9十个数字</li>
<li><code>cull index</code>：删除指定序号位置的数据，第三项包裹输入布尔值，控制当序号大于列表总数时是否循环删除。</li>
<li><code>cull pattern</code>：  剔除模式，与数据分流类似，通过剔除模式输入的布尔值列表删除输入列表的数据，不同的是这里false对应的数据直接被删除</li>
<li><code>duplicate data</code>：按设定的次数复制数据，第三项的排序为布尔值，控制列表内容是整体循环复制还是逐个按次数复制</li>
<li><code>random reduce</code>：根据设定的数量随机删除数据，随机种子（数字）可以切换不同的随机删除方式。</li>
<li><code>repeat data</code>：循环复制列表数据，并根据设定的列表长度输出一组数据。比如数据输入123，长度为7，则输出1231231七个数字</li>
</ul>
<h3 id="set"><a href="#set" class="headerlink" title="set"></a>set</h3><ul>
<li><code>create set</code>：合并同类项，合并所有列表相同的数据，并返回相同数据的序号。注意列表端输入的数据类型可以是数字、矢量、布尔值等</li>
</ul>
<h3 id="tree-树形数据"><a href="#tree-树形数据" class="headerlink" title="tree - 树形数据"></a>tree - 树形数据</h3><p>连接线为虚线</p>
<p>数据形式为多组数据</p>
<p>树形数据用于组织两个或两个以上的列表，每个列表的编号规则同列表，也是从0开始。</p>
<p>树形数据中的每个列表是一个树枝，等同于单个数据是一个列表中的元素。</p>
<p>树形数据中的每个树枝有一个路径，用于指定单个列表在树形数据中的位置，任何一个数都可以通过数据元素所在的树枝路径检索出来。</p>
<ul>
<li><code>Clean Tree</code>：根据设定的布尔值来决定是否删除树结构中的空项（null）、无效项（invalid）或空分支</li>
<li><code>split tree</code>：分割数据结构，将指定路径名称的数据支和其他数据支分离出来。</li>
<li><code>graft tree</code>：将现有数据结构中的每个数据再单独成组，会增加一级数据结构</li>
<li><code>flatten tree</code>：拍平数据结构，去掉所有的数据结构，把数据放在一个组内</li>
<li><code>simplify tree</code>：简化数据结构，把冗余的数据结构路径名称简化</li>
<li><code>flip matrix</code>：翻转数据结构。把原来的3大组，每组4个数据，翻转成4大组，每组3个数据</li>
</ul>
<h2 id="Surface"><a href="#Surface" class="headerlink" title="Surface"></a>Surface</h2><h3 id="analysis"><a href="#analysis" class="headerlink" title="analysis"></a>analysis</h3><ul>
<li>m^2^ ：一般多用于寻找形状的中心点</li>
</ul>
<h2 id="Intersect"><a href="#Intersect" class="headerlink" title="Intersect"></a>Intersect</h2><h3 id="shape"><a href="#shape" class="headerlink" title="shape"></a>shape</h3><ul>
<li><code>Region Intersection</code>：计算两条曲线的交集</li>
<li><code>Region Difference</code>:  计算曲线A减去与曲线B的重合部分</li>
<li><code>Region Union</code>:  计算两条曲线的并集</li>
</ul>
<h1 id="Grasshopper插件运算器名称总结"><a href="#Grasshopper插件运算器名称总结" class="headerlink" title="Grasshopper插件运算器名称总结"></a>Grasshopper插件运算器名称总结</h1><h2 id="Kangaroo"><a href="#Kangaroo" class="headerlink" title="Kangaroo"></a>Kangaroo</h2><p>kangaroo运算前提为网格面，rhino里的Nurbs曲面要先用<code>网格工具</code>里的<code>转化曲面为网格</code>工具转换为网格面再进行操作（高级设置中密度参考参数：除最大边缘长度设置为20以外其余都设置为0，通过最大边缘长度来控制密度）</p>
<p>工作流程：创建几何体，并得到要作用的对象(点、直线、网格等)，对点或直线施加对应的作用力，将物体接入<code>KangarooPhysics</code>工具来模拟重力、弹力、风力、压力、磁力、碰撞力等</p>
<h1 id="Grasshopper便捷玩法"><a href="#Grasshopper便捷玩法" class="headerlink" title="Grasshopper便捷玩法"></a>Grasshopper便捷玩法</h1><ul>
<li>点击上方菜单栏<code>display</code>的<code>draw icons</code>将电池中的名称改为图标更方便识别</li>
<li>初学者可勾选菜单栏<code>display</code>的<code>draw full name</code>来显示运算的输入、出端的完整名称</li>
<li>运算器工作栏白色状态下为显示，灰色状态下为隐藏</li>
</ul>
<h2 id="热键篇"><a href="#热键篇" class="headerlink" title="热键篇"></a>热键篇</h2><ul>
<li><p><code>number slider</code>：双击鼠标直接输入数字可以新建Slider，但不能精确控制Slider的值域</p>
<ul>
<li>双击鼠标输入如 1&lt;5&lt;12，可以精确控制值域和当前值</li>
<li>更懒的方法，双击鼠标输入如 1..12，也可以创建 1-12值域的Slider</li>
<li>关于精确度：根据输入的数值确定，如输入12.0精确到0.1位，输入12.000精确到0.001位</li>
</ul>
</li>
<li><p><code>Panel</code>：双击鼠标输入 “// ”可以快速创建Panel</p>
<ul>
<li> 双击鼠标输入 “//内容 ”可以快速创建Panel并输入内容（数字/文字/点/向量 等）</li>
</ul>
</li>
<li><p><code>Scribble 标注</code>：命令行输入 “~ 内容”可以快速创建Scribble标注</p>
</li>
<li><p>鼠标中键</p>
<ul>
<li><p><strong>Zoom</strong> 缩放Rhino视窗至选取物件</p>
</li>
<li><p><strong>Navigate</strong> 快速定位GH画布</p>
<ul>
<li>通过鼠标中键弹出面板，选择<strong>Navigate</strong>可弹出GH画布缩略图，拖动其中视窗框可以快速移动GH视窗</li>
</ul>
</li>
<li><p><strong>Find</strong> 搜索定位电池</p>
<ul>
<li>通过鼠标中间面板选择Find可以快速搜索并定位相关名称的电池</li>
</ul>
</li>
</ul>
</li>
<li><p>鼠标右键</p>
<ul>
<li><code>Eexpression</code>键入表达式可快速处理数据</li>
</ul>
</li>
<li><p>画布</p>
<ul>
<li><p><strong>Alt + 鼠标</strong>  拖动画布 电池向右整体推动分区</p>
<ul>
<li>使用场景：当想要在已有电池组中间再插入电池时，可以用 Alt + 鼠标 将电池组分隔整体往右移动</li>
</ul>
</li>
<li><p><strong>Alt + 鼠标拖动画布 + Alt</strong> 电池向下整体推动分区</p>
</li>
<li><p><strong>Shift + Ctrl + V</strong> 粘贴倒屏幕中间（超适合远距离复制粘贴）</p>
</li>
</ul>
</li>
<li><p>电池&amp;线</p>
<ul>
<li><strong>Ctrl+Q</strong> 快速切换 隐藏/显示 选中的电池内容</li>
<li><strong>Ctrl+E</strong> 快速切换 停用/启用 选中的电池（注意与显示隐藏的区别）</li>
<li><strong>左键拖拽 + Alt</strong> 复制电池  （注意要先拖拽再按Alt）</li>
<li>按住<strong>Shift键</strong>可以增加多个电池输入端的连线，有些数据要注意连接的先后顺序；按住Ctrl键则是减少电池的连接线，也可以右键菜单里断开指定的连接线</li>
<li><strong>Ctrl + Shift + 鼠标拖拽线</strong> 将<strong>线组</strong>直接换输入端</li>
<li>同时按住<strong>Ctrl+Alt键+工作区的运算器</strong>     这个时候GH就会自动显示出运算器在工具列中的位置</li>
<li><strong>Ctrl + ← / →</strong> 选择连线上游/下游的电池（配合shift 实现加选电池）</li>
<li>框选所需要的电池在框选栏会出现小方向键，点击小方向键即可对齐</li>
</ul>
</li>
<li><p><strong>Shift + Ctrl + Q</strong> 可框选代码和 Rhino (犀牛) 视窗的高分辨率截图</p>
<ul>
<li>多用在截取代码以及Rhino视窗，可以直接截取高清的GH画布，弹出的窗体中还可选择以相框形式插入Rhino视窗 或 框出关键电池组，以及修剪截图功能</li>
</ul>
</li>
</ul>
<ul>
<li>中继器 - <code>relay</code><ul>
<li>grasshopper更新到了1.0版本，可以使用官方中继器：<code>relay</code></li>
<li>在任意连线上双击，即可创建一个中继器</li>
<li>这个东西的主要用途就是把一根线分成好多根，把好多根线合并成一根</li>
</ul>
</li>
</ul>
<h2 id="电池篇"><a href="#电池篇" class="headerlink" title="电池篇"></a>电池篇</h2><h3 id="Loft-自动对齐"><a href="#Loft-自动对齐" class="headerlink" title="Loft 自动对齐"></a>Loft 自动对齐</h3><p>在Rhino里Loft（放样），根据点的顺序和点的线的端头确定放样方向。而在Grasshopper里经常出现线的方向不同而Loft出扭曲的面，<strong>有一个快速省力的技巧是，Loft电池的Options (O端）右键打开放样属性，勾选Align Sections，就能自动放样线的对齐端头，避免放出扭曲的面，不用一个个选出来翻转</strong></p>
<h3 id="Flip-Curve-参考线"><a href="#Flip-Curve-参考线" class="headerlink" title="Flip Curve 参考线"></a>Flip Curve 参考线</h3><p>Flip Curve 电池的第二个输入端 Guide其实是可以输入参考曲线。如果G端留空，默认所有线都翻转</p>
<p>但是如果输入G端参考线，则所有线按照参考线的方向排列（相当于整理方向）</p>
<h3 id="Split-Tree"><a href="#Split-Tree" class="headerlink" title="Split Tree"></a>Split Tree</h3><p><strong>Split Tree，主要用于 筛选/切分 树型数据</strong></p>
<p>输入端：</p>
<ul>
<li><p>Data ： 需要被处理的树型数据</p>
</li>
<li><p>Masks ：数据被 筛选/切分 的规则</p>
<ul>
<li>规则（Masks）输入端的数据结构格式需要和原数据的格式一致：</li>
</ul>
</li>
</ul>
<p>输出端：</p>
<ul>
<li><p>Positive ：符合筛选规则的数据出口</p>
</li>
<li><p>Negative : 不符合筛选规则的数据出口</p>
</li>
</ul>
<p>最基本的规则：</p>
<ul>
<li>以大括号 { } 构造，分号 ; 区分不同层级的组号</li>
<li>直接输入组号，筛选出组，所见即所得</li>
</ul>
<p>进阶玩法：</p>
<ul>
<li>{ 0 ; ? } = 筛选出所有以 0 开头的分支</li>
<li>{ 0 ; ( 0,3 )} = 筛选出所有以 0 开头，以 0 或 3 结尾的分支</li>
<li>{ 0 ; ( 0 to 3 )} = 筛选出所有以 0 开头，以 0-3 数字结尾的分支</li>
<li>相应地，这些规则符号可以运用在任何一个分支层级：<ul>
<li>{ 0 ; ? ; 0 } = 筛选出所有以 0 开头和结尾的分支</li>
<li>{ 0 ; ( 0,3 ) ; 0 } = 筛选出所有以 0 开头，中间 0 或 3 ，并以 0 结尾的分支</li>
<li>{ 0 ; ( 0 to 3 ) ; 0} = 筛选出所有以 0 开头，中间为 0-3 数字，并以 0 结尾的分支</li>
</ul>
</li>
</ul>
<p>上述例子则是通过<strong>规则符号</strong>配合<code>Split Tree</code>可用于筛选树形数据的数据</p>
<p>可用的规则符号：</p>
<ul>
<li>？ = 任意的单个整数</li>
<li>*   = 任意数量的整数</li>
<li>3   = 特定的整数（这里以3为例）</li>
<li>！3 = 除特定整数外的所有整数（这里以“非3”的数为例）</li>
<li>( 2, 4, 5 ) = 组内的任一整数（这里以 2、4、5为例）</li>
<li>! ( 2, 4, 5 ) = 除组内任一整数的其他所有整数（这里以“非2、4、5”的数为例）</li>
<li>( 2 to 10 ) = 区间内的所有整数（这里以2到10区间为例）（包含 2 和 10）</li>
<li>! ( 2 to 10 ) = 区间外的所有整数（这里以 不在2到10区间 为例）（不包含 2 和 10 ）</li>
<li>( 0 , 2 , … ) = 无限序列中的任何整数（这里以 “偶数” 为例）</li>
<li>! ( 2 , 4 , … ) = 不属于无限序列中的任何整数（这里以 “0以及其他奇数” 为例）</li>
<li>( 0 , 2 , … , 30 ) = 有限序列中的任何整数（这里以 0到30中的所有偶数 为例）</li>
<li>! ( 2 , 4 , … , 30 ) = 不属于有限序列中的任何整数（这里以 “0 和大于30的偶数，以及所有奇数“ 为例）</li>
</ul>
<p>除上面的规则符号外，树型数据选择规则还可以通过中括号 [ ] 输入索引值（index）筛选出组中的项值（item）：</p>
<ul>
<li>{ 0;(0,1)}[3]：即为末尾组号为0或1的分支中索引值为3的 item</li>
<li>同时，[ ] 中括号内的 item 筛选也可以赋予规则符号，于是画风就会变得花里胡哨的<ul>
<li>{!(2,4,…);!(1,2);(0 to2)}[!(2,4,5)]：筛选开头为0或奇数，中间为非1或2，结尾为0到2区间的所有分支 中的 索引值不为2、4、5的 item ………. </li>
</ul>
</li>
</ul>
<p>此外，可以用布尔运算组合多个规则。。。。。比如：</p>
<ul>
<li>{ * }[ ( 0 , 1 ) or ( 3 , 4 , 5 ) ] = 筛选出所有分支的索引值为 0、1、3、4、5 的 item</li>
</ul>
<p>所以也就可以根据自己的需要组合出千千万万种复杂到亲妈都认不得的筛选规则：</p>
<ul>
<li>{!(2,4,…)or(4,6);!(1,2);(0 to2)or(4 to 6)}[(0,1) or (4 to 6)]：筛选开头为0或4或6或奇数，中间为非1或2，结尾为0到2区间或4到6区间的所有分支 中的索引值为0或1或4到6区间的所有 item</li>
</ul>
<h1 id="Grasshopper扩展插件"><a href="#Grasshopper扩展插件" class="headerlink" title="Grasshopper扩展插件"></a>Grasshopper扩展插件</h1><h2 id="扩展插件的安装"><a href="#扩展插件的安装" class="headerlink" title="扩展插件的安装"></a>扩展插件的安装</h2><ul>
<li><p>gha格式文件：进入gh页面 - file - Special Folders - Components Folder，将所需要的插件包粘贴进去（部分插件需要下载安装）</p>
</li>
<li><p>ghuser格式文件：有一些插件，例如honeybee插件，包含了gha和ghuser两种格式的文件，首先将绿色的gha格式文件还是放入上面讲的components folder，然后将ghuser格式文件放入下面的文件夹：file - Special Folders - User Object Folder</p>
</li>
</ul>
<h2 id="常用扩展的简介"><a href="#常用扩展的简介" class="headerlink" title="常用扩展的简介"></a>常用扩展的简介</h2><p>GH的插件大都是按照动物名字来命名的，包括Grasshopper自身就是蝗虫的意思，还有承载它运行的Rhino，意为犀牛</p>
<ul>
<li><p>Kangaroo（袋鼠）</p>
<p>它是非常优秀的一款力学模拟插件。简单地说是用来进行力学仿真，而不是受力分析。比如推力、重力、共面力、风等等。据了解，最常用的功能是在曲面上均布点和让四点共面。当然，它的作用远远不止这些，可以在Kangaroo模拟行走都市，还有水流、星空，几乎任何与宏观力学有关的东西都可以。从Rhino6开始就已经将其内置与GH中，可以直接使用</p>
</li>
<li><p>WeaveBird（编制鸟）</p>
<p>GH中最常用的网格编辑工具，包含细分、网格开洞、加厚等常用操作。可以对mesh进行细分、挖洞、加厚等等。</p>
</li>
<li><p>LunchBox（便当盒）</p>
<p>功能如其名，一个便当盒，就是便利，没啥大的创新。创建表皮的利器，有矩形分割、三角形分割、菱形分割、六边形分割等网格划分形式，还可以翻转曲面的UV线。可直接创建如莫比乌斯环等独特造型，还蛮方便的一点是与Excel表进行联动。</p>
</li>
<li><p>Karamba</p>
<p>个人觉得这个插件似乎是挺专业的有限元分析插件，可以把点和直线当作节点和梁柱输入，它就会算出每个点的受力情况。但是有个问题，就是面对复杂的模型它是要收费的。</p>
</li>
<li><p>Geco</p>
<p>该插件负责将GH模型导入Ecotect中进行计算，并返回，结果显示在Rhino里。这些操作都是基于Mesh处理的，大家操作之前要理解Mesh。当然啦，它并不涵盖所有Ecotect的功能，只有两个主要的计算，一个是SolarCalculate，另一个是LightCalculate。</p>
</li>
<li><p>KuKa</p>
<p>机器人插件，操纵德国KuKa，这个机器人还可以画肖像，还可以写字，挺好玩的。</p>
</li>
<li><p>Mosquito（蚊子）</p>
<p>这个插件可以提取建筑、道路、地图数据、图片、媒体等信息。也可以一键模拟雨水径流分析，还可以提取电脑的音频文件做有趣的声音可视化效果。</p>
</li>
<li><p>Human</p>
<p>Human主要与Rhino模型进行交互，可以提取模型材质、文字、图层、线型等信息，是最常用的文件和图形编辑器，有助于方案的可视化表达。它扩展Grasshopper创建和引用包括灯光、块和文本对象的几何图形的属性，比如线宽、颜色、材质、灯光等。它还可以访问Rhino文档的信息，在Grasshopper中读取Rhino图形的属性，比如分组，分层等等。</p>
</li>
<li><p>HoopSnake 、Anemone</p>
<p>这两个工具的功能都是循环。循环可以完成迭代和递归两种控制结构。当然啦，这不重要，只要记得是循环即可。大家还记得分形吗？分形就是典型的不断循环。比如下图中的树枝不断地细分，但是细分逻辑都是相同的。Anemone这个工具是后出的，逻辑结构更清晰化，当然HoopSnake差别不大，有的人习惯了用Hoop。</p>
</li>
<li><p>Minimal Surface</p>
<p>极小曲面插件</p>
</li>
<li><p>GHowl</p>
<p>这是一个连接grasshopper和processing的关键插件。可以将processing中的代码拾取到grasshopper，根据代码变化自动生成模型。当然，它还可以跟XML、谷歌地图文件等多种格式文件联动，还有很多物理设备也可以进行联通，比如你的手机。</p>
</li>
<li><p>FabTools</p>
<p>FabTools简称FT，FT是一个小工具，主要优点就是可以进行快速标注，而且可以bake很多属性。这在幕墙的编号和标注中起到了不少作用。小编在《丽泽SOHOI》里就有提到对幕墙的标注。可以快速标注和bake很多属性，主要是作用是模型信息化</p>
</li>
<li><p>Elk</p>
<p>它可以通过在地图上截图，然后生成这个地方的CAD图。但是要注意哦，Elk支持的地图并不是谷歌地图，网址为（<a target="_blank" rel="noopener" href="http://www.openstreetmap.org/%EF%BC%89%EF%BC%8C%E7%9B%B8%E5%AF%B9%E6%9D%A5%E8%AF%B4%EF%BC%8C%E5%A4%A7%E5%9F%8E%E5%B8%82%E7%9A%84%E8%BF%98%E6%98%AF">http://www.openstreetmap.org/），相对来说，大城市的还是</a> 比较健全的，这一点以后还是需要不断完善</p>
</li>
<li><p>Galapagos、Octopus</p>
<p>接下来介绍两个用来优化和筛选结果的工具。尤其是Galapagos，亲测非常有效！这个工具里面涉及到两种算法：遗传算法和退火算法。，Octpous又有什么不一样的呢？区别在于，前者只能优化一个参数，比如窗地比最小，而后者可以同时优化多个参数，比如在窗地比最小的基础上，还要体型系数最小，并且要保证容积率最低</p>
</li>
<li><p>BIM GeomGym IFC</p>
<p>目前BIM大火，但是软件之间的格式兼容却不尽人意。最常见的格式就是IFC，这个插件就是实现互换格式的，在ArchiCAD、Revit、Bently、Tekla之间。不过，该插件是收费滴</p>
</li>
<li><h5 id="Starling"><a href="#Starling" class="headerlink" title="Starling"></a>Starling</h5><p>在处理网格的时候就能显现这个插件的厉害了。原理就是网格的拓补映射</p>
</li>
<li><p>Chop Chop</p>
<p>Chop Chop通过点击删除电池连线，免去按足Ctrl再拖线删除之苦。右键弹出菜单可以选择使用Ctrl+鼠标左键或鼠标后退键，双击切换功能开启或关闭。</p>
</li>
<li><p>Bifocals</p>
<p>这是由marcsyp开发的小插件，以气泡的方式在每一个电池的上方显示其名称，能帮助快速熟悉电池组的名称及其功能，对grasshopper新手，尤其是在教学中有很大帮助，置入<code>Bifocals</code>电池即可使用</p>
</li>
<li><p>Cocoon</p>
<p>使用Marching Cubes算法将等值面转换为多边形网格，功能类似千足虫插件</p>
</li>
<li><p>Culebra</p>
<p>可模拟集群行为，用于可视化与数据的交互</p>
</li>
<li><p>hummingbird（蜂鸟）</p>
<p>主要功能是与Revit进行文件交互</p>
</li>
<li><p>nudibranch</p>
<p>该插件可实现不同的粒子运动，同时记录粒子在吸引子定义的向量场中移动的轨迹，这些轨迹可以应用到动画模拟中。</p>
</li>
<li><p>Octopus</p>
<p>根据遗传算法来优化和筛选结果，相比于GH自带的遗传算法运算器，该插件可同时优化多个参数，效率更高。</p>
</li>
<li><p>physarealm</p>
<p>该插件的算法类似蚁群算法，通过模拟细菌在搜索事物过程中延伸卷须，找寻获得食物最有效的路径。它是一种类似于蚁群算法的stigmergy算法。Physarum polycephalum，字面意思是“多头粘液”，是一种粘液霉菌，栖息在阴凉、潮湿的区域，例如腐烂的树叶和原木。当在两个点有燕麦的迷宫中生长时，多头假单胞菌会从迷宫中的任何地方缩回，除了连接两个食物来源的最短路线。这个插件正是模拟这种生物学行为。它可以做一些非常有趣的设计或建筑</p>
</li>
<li><p>Rabbit</p>
<p>可以直接在GH中直接构建元胞自动机和L-系统，具有模拟复杂系统时空演化过程的能力。</p>
</li>
<li><p>shortestwalk</p>
<p>该插件只包含一个运算器，其作用是构建两点之间的最短路径。</p>
</li>
<li><p>starling</p>
<p>网格处理工具，可对物体的网格结构进行重新拓扑映射。</p>
</li>
<li><p>Millipede</p>
<p>主要用于结构分析与优化，可对框架结构与壳结构进行快速的线性与弹性分析。还可通过拓扑优化的方法来生成结构体，并以可视化的形式呈现结果。</p>
</li>
<li><p>IntraLattice</p>
<p>用于在设计空间内生成晶格单元组合体 ，为结构的设计和优化提供了多种可能性。</p>
</li>
<li><p>Chromodoris</p>
<p>其主要功能是可以非常快的进行体素采样、创建iso曲面、网格圆滑、网格分析。该插件创建网格的原理与千足虫插件类似，即通过矢量场来构建等值面。</p>
</li>
<li><p>Ladybug &amp; Honeybee</p>
<p>这两个插件可将气象数据加工为可视化的环境分析图形，并完成对日照、环境、人体舒适度等因素的可视化分析。</p>
</li>
<li><p>Quelea</p>
<p>Quelea插件可以通过对自然界生物行为的分析，模拟鱼群、鸟群等的运动行为，进一步模拟建筑物中人流的疏散，从而达到优化建筑空间的目的</p>
<p>Quelea插件与Physarealm插件的使用方法相似，都需要先确定粒子发射器以及模拟的环境，并由主模拟器驱动整个程序运行。</p>
</li>
<li><p>Bubalus_GH</p>
<p>解决Rhino模型中添加代理树、车、人等模型的繁琐步骤。</p>
</li>
<li><p>Bison</p>
<p>Bison是一款景观建筑插件。它具有地形网格创建、分析、编辑和注释的工具。有很全面的分析系统。</p>
</li>
<li><p>Sunflower</p>
<p>简单好用的日照分析插件，上手快运行速度快，非常推荐</p>
</li>
<li><p>Vipers</p>
<p>国产插件，好的一点是他的名称说明全部为中文，算是GH运算器的Plus版。</p>
</li>
<li><p>Pufferfish</p>
<p>这个插件是一套专注于补间、混合、变形、平均、转换和插值的组件 - 本质上是形状变化</p>
</li>
<li><p>Culebra</p>
<p>这个插件是一个 2D|3D 多对象行为库，专注于自定义可视化、数据和性能特征的混合系统交互。它包含用于创建动态多代理交互的对象和行为的集合。模拟对象的集群行为。动漫，游戏行业用的比较多</p>
</li>
<li><p>Shortest Walk Gh </p>
<p>计算最短路径！</p>
</li>
<li><p>SnappingGecko</p>
<p>挺喜欢的一个插件！！！简直是强迫症患者的福音，这个插件可以在移动的时候标示并吸附到对齐参考线，吸附范围和力度也可以根据需要自行调节。电池再多也不用怕电池组混乱成一团，再也不用担心GH排版乱啦！ </p>
</li>
<li><p>SHIBAINU</p>
<p>和Lunchbox很像，只不过Lunchbox是创建一些较规则的图案，而SHIBANU是创建日本传统图案。这个插件也很贴心的将输出的面按照不同的规格分开，省了筛选边缘的操作。做做铺装，立面还是杠杠滴</p>
</li>
<li><p>EvoMass</p>
<p>这个插件可以用来生成各种各样的建筑体块，和做一些分析。在前期体块推敲时很有用！也可以用来做一些分析图，形体生成等等。用法也很简单，三种不同的体块组合形式，点击Setup设置参数，也可以随机调整，完成之后Bake出来需要的部分就好。设置界面可以调成中文</p>
</li>
</ul>

      </div>
      
        <div class="prev-or-next">
          <div class="post-foot-next">
            
              <a href="/py_spider/" target="_self">
                <i class="iconfont icon-chevronleft"></i>
                <span>上一页</span>
              </a>
            
          </div>
          <div class="post-attach">
            <span class="post-pubtime">
              <i class="iconfont icon-updatetime mr-10" title="更新时间"></i>
              2023-01-26 13:58:20
            </span>
            
                  <span class="post-categories">
                    <i class="iconfont icon-bookmark" title="分类"></i>
                    
                    <span class="span--category">
                      <a href="/categories/%E5%BB%BA%E7%AD%91%E5%AD%A6/" title="建筑学">
                        <b>#</b> 建筑学
                      </a>
                    </span>
                    
                    <span class="span--category">
                      <a href="/categories/%E5%BB%BA%E7%AD%91%E5%AD%A6/%E8%BD%AF%E4%BB%B6/" title="软件">
                        <b>#</b> 软件
                      </a>
                    </span>
                    
                  </span>
              
                  <span class="post-tags">
                    <i class="iconfont icon-tags mr-10" title="标签"></i>
                    
                    <span class="span--tag mr-8">
                      <a href="/tags/%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97/" title="学习指南">
                        #学习指南
                      </a>
                    </span>
                    
                    <span class="span--tag mr-8">
                      <a href="/tags/pc/" title="pc">
                        #pc
                      </a>
                    </span>
                    
                    <span class="span--tag mr-8">
                      <a href="/tags/%E5%BB%BA%E6%A8%A1/" title="建模">
                        #建模
                      </a>
                    </span>
                    
                    <span class="span--tag mr-8">
                      <a href="/tags/%E5%BB%BA%E7%AD%91/" title="建筑">
                        #建筑
                      </a>
                    </span>
                    
                    <span class="span--tag mr-8">
                      <a href="/tags/%E8%BD%AF%E4%BB%B6/" title="软件">
                        #软件
                      </a>
                    </span>
                    
                    <span class="span--tag mr-8">
                      <a href="/tags/Rhino/" title="Rhino">
                        #Rhino
                      </a>
                    </span>
                    
                    <span class="span--tag mr-8">
                      <a href="/tags/Grasshopper/" title="Grasshopper">
                        #Grasshopper
                      </a>
                    </span>
                    
                  </span>
              
          </div>
          <div class="post-foot-prev">
            
              <a href="/book-cognitive-awakening/" target="_self">
                <span>下一页</span>
                <i class="iconfont icon-chevronright"></i>
              </a>
            
          </div>
        </div>
      
    </div>
    
  <div id="btn-catalog" class="btn-catalog">
    <i class="iconfont icon-catalog"></i>
  </div>
  <div class="post-catalog hidden" id="catalog">
    <div class="title">目录</div>
    <div class="catalog-content">
      
        <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Grasshopper%E5%B8%B8%E8%A7%81%E8%BF%90%E7%AE%97%E5%99%A8%E5%90%8D%E7%A7%B0%E6%80%BB%E7%BB%93"><span class="toc-text">Grasshopper常见运算器名称总结</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Params-%E5%8F%82%E6%95%B0"><span class="toc-text">Params - 参数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Geometry-%E5%87%A0%E4%BD%95%E4%BD%93"><span class="toc-text">Geometry - 几何体</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Input-%E8%BE%93%E5%85%A5"><span class="toc-text">Input - 输入</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Util"><span class="toc-text">Util</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Math"><span class="toc-text">Math</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#domain-%E5%8C%BA%E9%97%B4%E8%8C%83%E5%9B%B4"><span class="toc-text">domain - 区间范围</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Sets"><span class="toc-text">Sets</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#list-%E7%BA%BF%E5%BD%A2%E6%95%B0%E6%8D%AE"><span class="toc-text">list - 线形数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Sequence-%E5%BA%8F%E5%88%97%E9%9B%86%E5%90%88"><span class="toc-text">Sequence - 序列集合</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#set"><span class="toc-text">set</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#tree-%E6%A0%91%E5%BD%A2%E6%95%B0%E6%8D%AE"><span class="toc-text">tree - 树形数据</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Surface"><span class="toc-text">Surface</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#analysis"><span class="toc-text">analysis</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Intersect"><span class="toc-text">Intersect</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#shape"><span class="toc-text">shape</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Grasshopper%E6%8F%92%E4%BB%B6%E8%BF%90%E7%AE%97%E5%99%A8%E5%90%8D%E7%A7%B0%E6%80%BB%E7%BB%93"><span class="toc-text">Grasshopper插件运算器名称总结</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Kangaroo"><span class="toc-text">Kangaroo</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Grasshopper%E4%BE%BF%E6%8D%B7%E7%8E%A9%E6%B3%95"><span class="toc-text">Grasshopper便捷玩法</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%83%AD%E9%94%AE%E7%AF%87"><span class="toc-text">热键篇</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%94%B5%E6%B1%A0%E7%AF%87"><span class="toc-text">电池篇</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Loft-%E8%87%AA%E5%8A%A8%E5%AF%B9%E9%BD%90"><span class="toc-text">Loft 自动对齐</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Flip-Curve-%E5%8F%82%E8%80%83%E7%BA%BF"><span class="toc-text">Flip Curve 参考线</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Split-Tree"><span class="toc-text">Split Tree</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Grasshopper%E6%89%A9%E5%B1%95%E6%8F%92%E4%BB%B6"><span class="toc-text">Grasshopper扩展插件</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%89%A9%E5%B1%95%E6%8F%92%E4%BB%B6%E7%9A%84%E5%AE%89%E8%A3%85"><span class="toc-text">扩展插件的安装</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E6%89%A9%E5%B1%95%E7%9A%84%E7%AE%80%E4%BB%8B"><span class="toc-text">常用扩展的简介</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#Starling"><span class="toc-text">Starling</span></a></li></ol></li></ol></li></ol></li></ol></li></ol>
      
    </div>
  </div>

  
<script src="/js/catalog.js"></script>




    
      <div class="comments-container">
        







      </div>
    
  </div>


        
<div class="footer">
  <div class="social">
    <ul>
      
        <li>
          <a title="telegram" target="_blank" rel="noopener" href="https://t.me/y1xxxxx">
            <i class="iconfont icon-telegram"></i>
          </a>
        </li>
      
        <li>
          <a title="email" href="mailto:y1xi_bug@qq.com">
            <i class="iconfont icon-envelope"></i>
          </a>
        </li>
      
        <li>
          <a title="github" target="_blank" rel="noopener" href="https://github.com/yixicool">
            <i class="iconfont icon-github"></i>
          </a>
        </li>
      
        <li>
          <a title="wechat" target="_blank" rel="noopener" href="https://pic.imgdb.cn/item/63d23353face21e9efb6c32b.jpg">
            <i class="iconfont icon-wechat"></i>
          </a>
        </li>
      
    </ul>
  </div>
  
    
    <div class="footer-more">
      
        <a href="https://y1xi.eu.org/">Copyright © 2024 _y1xi_</a>
        
    </div>
  
    
    <div class="footer-more">
      
        Theme by Oranges | Powered by Hexo
        
    </div>
  
  
</div>

      </div>

      <div class="tools-bar">
        <div class="back-to-top tools-bar-item hidden">
  <a href="javascript: void(0)">
    <i class="iconfont icon-chevronup"></i>
  </a>
</div>


<script src="/js/backtotop.js"></script>



        
  <div class="search-icon tools-bar-item" id="search-icon">
    <a href="javascript: void(0)">
      <i class="iconfont icon-search"></i>
    </a>
  </div>

  <div class="search-overlay hidden">
    <div class="search-content" tabindex="0">
      <div class="search-title">
        <span class="search-icon-input">
          <a href="javascript: void(0)">
            <i class="iconfont icon-search"></i>
          </a>
        </span>
        
          <input type="text" class="search-input" id="search-input" placeholder="搜索...">
        
        <span class="search-close-icon" id="search-close-icon">
          <a href="javascript: void(0)">
            <i class="iconfont icon-close"></i>
          </a>
        </span>
      </div>
      <div class="search-result" id="search-result"></div>
    </div>
  </div>

  <script type="text/javascript">
    var inputArea = document.querySelector("#search-input")
    var searchOverlayArea = document.querySelector(".search-overlay")

    inputArea.onclick = function() {
      getSearchFile()
      this.onclick = null
    }

    inputArea.onkeydown = function() {
      if(event.keyCode == 13)
        return false
    }

    function openOrHideSearchContent() {
      let isHidden = searchOverlayArea.classList.contains('hidden')
      if (isHidden) {
        searchOverlayArea.classList.remove('hidden')
        document.body.classList.add('hidden')
        // inputArea.focus()
      } else {
        searchOverlayArea.classList.add('hidden')
        document.body.classList.remove('hidden')
      }
    }

    function blurSearchContent(e) {
      if (e.target === searchOverlayArea) {
        openOrHideSearchContent()
      }
    }

    document.querySelector("#search-icon").addEventListener("click", openOrHideSearchContent, false)
    document.querySelector("#search-close-icon").addEventListener("click", openOrHideSearchContent, false)
    searchOverlayArea.addEventListener("click", blurSearchContent, false)

    var searchFunc = function (path, search_id, content_id) {
      'use strict';
      var $input = document.getElementById(search_id);
      var $resultContent = document.getElementById(content_id);
      $resultContent.innerHTML = "<ul><span class='local-search-empty'>首次搜索，正在载入索引文件，请稍后……<span></ul>";
      $.ajax({
        // 0x01. load xml file
        url: path,
        dataType: "xml",
        success: function (xmlResponse) {
          // 0x02. parse xml file
          var datas = $("entry", xmlResponse).map(function () {
            return {
              title: $("title", this).text(),
              content: $("content", this).text(),
              url: $("url", this).text()
            };
          }).get();
          $resultContent.innerHTML = "";

          $input.addEventListener('input', function () {
            // 0x03. parse query to keywords list
            var str = '<ul class=\"search-result-list\">';
            var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
            $resultContent.innerHTML = "";
            if (this.value.trim().length <= 0) {
              return;
            }
            // 0x04. perform local searching
            datas.forEach(function (data) {
              var isMatch = true;
              var content_index = [];
              if (!data.title || data.title.trim() === '') {
                data.title = "Untitled";
              }
              var orig_data_title = data.title.trim();
              var data_title = orig_data_title.toLowerCase();
              var orig_data_content = data.content.trim().replace(/<[^>]+>/g, "");
              var data_content = orig_data_content.toLowerCase();
              var data_url = data.url;
              var index_title = -1;
              var index_content = -1;
              var first_occur = -1;
              // only match artiles with not empty contents
              if (data_content !== '') {
                keywords.forEach(function (keyword, i) {
                  index_title = data_title.indexOf(keyword);
                  index_content = data_content.indexOf(keyword);

                  if (index_title < 0 && index_content < 0) {
                    isMatch = false;
                  } else {
                    if (index_content < 0) {
                      index_content = 0;
                    }
                    if (i == 0) {
                      first_occur = index_content;
                    }
                    // content_index.push({index_content:index_content, keyword_len:keyword_len});
                  }
                });
              } else {
                isMatch = false;
              }
              // 0x05. show search results
              if (isMatch) {
                str += "<li><a href='" + data_url + "' class='search-result-title'>" + orig_data_title + "</a>";
                var content = orig_data_content;
                if (first_occur >= 0) {
                  // cut out 100 characters
                  var start = first_occur - 20;
                  var end = first_occur + 80;

                  if (start < 0) {
                    start = 0;
                  }

                  if (start == 0) {
                    end = 100;
                  }

                  if (end > content.length) {
                    end = content.length;
                  }

                  var match_content = content.substr(start, end);

                  // highlight all keywords
                  keywords.forEach(function (keyword) {
                    var regS = new RegExp(keyword, "gi");
                    match_content = match_content.replace(regS, "<span class=\"search-keyword\">" + keyword + "</span>");
                  });

                  str += "<p class=\"search-result-abstract\">" + match_content + "...</p>"
                }
                str += "</li>";
              }
            });
            str += "</ul>";
            if (str.indexOf('<li>') === -1) {
              return $resultContent.innerHTML = "<ul><span class='local-search-empty'>没有找到内容，请尝试更换检索词。<span></ul>";
            }
            $resultContent.innerHTML = str;
          });
        },
        error: function(xhr, status, error) {
          $resultContent.innerHTML = ""
          if (xhr.status === 404) {
            $resultContent.innerHTML = "<ul><span class='local-search-empty'>未找到search.xml文件，具体请参考：<a href='https://github.com/zchengsite/hexo-theme-oranges#configuration' target='_black'>configuration</a><span></ul>";
          } else {
            $resultContent.innerHTML = "<ul><span class='local-search-empty'>请求失败，尝试重新刷新页面或稍后重试。<span></ul>";
          }
        }
      });
      $(document).on('click', '#search-close-icon', function() {
        $('#search-input').val('');
        $('#search-result').html('');
      });
    }

    var getSearchFile = function() {
        var path = "/search.xml";
        searchFunc(path, 'search-input', 'search-result');
    }
  </script>




        
  <div class="tools-bar-item theme-icon" id="switch-color-scheme">
    <a href="javascript: void(0)">
      <i id="theme-icon" class="iconfont icon-moon"></i>
    </a>
  </div>

  
<script src="/js/colorscheme.js"></script>





        
  
    <div class="share-icon tools-bar-item">
      <a href="javascript: void(0)" id="share-icon">
        <i class="iconfont iconshare"></i>
      </a>
      <div class="share-content hidden">
        
          <a class="share-item" href="https://twitter.com/intent/tweet?text=' + Grasshopper + '&url=' + https%3A%2F%2Fy1xi.eu.org%2Fgh%2F + '" target="_blank" title="Twitter">
            <i class="iconfont icon-twitter"></i>
          </a>
        
        
          <a class="share-item" href="https://www.facebook.com/sharer.php?u=https://y1xi.eu.org/gh/" target="_blank" title="Facebook">
            <i class="iconfont icon-facebooksquare"></i>
          </a>
        
      </div>
    </div>
  
  
<script src="/js/shares.js"></script>



      </div>
    </div>
  <!-- hexo injector body_end start --><script data-pjax>function history_calendar_injector_config(){
                var parent_div_git = document.getElementsByClassName('sticky_layout')[0];
                var item_html = '<div class="card-widget card-history"><div class="card-content"><div class="item-headline"><i class="fas fa-clock fa-spin"></i><span>那年今日</span></div><div id="history-baidu" style="height: 100px;overflow: hidden"><div class="history_swiper-container" id="history-container" style="width: 100%;height: 100%"><div class="swiper-wrapper" id="history_container_wrapper" style="height:20px"></div></div></div></div>';
                console.log('已挂载history_calendar')
                // parent_div_git.innerHTML=item_html+parent_div_git.innerHTML // 无报错，但不影响使用(支持pjax跳转)
                parent_div_git.insertAdjacentHTML("afterbegin",item_html) // 有报错，但不影响使用(支持pjax跳转)
            }if( document.getElementsByClassName('sticky_layout')[0] && (location.pathname ==='/'|| '/' ==='all')){

            history_calendar_injector_config()
        } </script><script data-pjax  src="https://cdn.jsdelivr.net/npm/swiper/swiper-bundle.min.js"></script><script data-pjax src="https://cdn.jsdelivr.net/gh/Zfour/Butterfly-card-history/baiduhistory/js/main.js"></script><script data-pjax>function electric_clock_injector_config(){
                var parent_div_git = document.getElementsByClassName('sticky_layout')[0];
                var item_html = '<div class="card-widget card-clock"><div class="card-glass"><div class="card-background"><div class="card-content"><div id="hexo_electric_clock"><img id="card-clock-loading" src="https://cdn.jsdelivr.net/gh/Zfour/Butterfly-clock/clock/images/weather/loading.gif" style="height: 120px; width: 100%;" data-ll-status="loading" class="entered loading"></div></div></div></div></div>';
                console.log('已挂载electric_clock')
                // parent_div_git.innerHTML=item_html+parent_div_git.innerHTML // 无报错，但不影响使用(支持pjax跳转)
                parent_div_git.insertAdjacentHTML("afterbegin",item_html) // 有报错，但不影响使用(支持pjax跳转)
            }if( document.getElementsByClassName('sticky_layout')[0] && (location.pathname ==='/'|| '/' ==='all')){

            electric_clock_injector_config()
        } </script><script src="https://pv.sohu.com/cityjson?ie=utf-8"></script><script data-pjax  src="https://cdn.jsdelivr.net/gh/Zfour/hexo-electric-clock@1.0.6/clock.js"></script><!-- hexo injector body_end end --></body>
</html>
